@model Web_banThucPhamSach.Data.ReportViewModel
@{
    ViewData["Title"] = "ThongKe";
    Layout = "~/Views/Shared/_Admin.cshtml";
}
<style>
    form{
        height: 50px;
        display: flex;
        position: relative;
    }

    .row{
        display: flex;
        height: 50px;
        min-height: 0px;
        font-size: 20px;
    }

    #quarter, #month {
        font-size: 18px;
    }

    .btn{
        position: absolute;
        right: 10px;
        font-size: 20px;
        background-color: forestgreen;
    }
    .btn:hover{
        background-color: darkolivegreen;
    }
</style>
<div id="report-management">
    <h1>Báo cáo và Thống kê</h1>

@*     <!-- Thống kê chung -->
    <div class="summary-statistics">
        <div class="statistic-box">
            <h2>Số lượng đơn hàng</h2>
            <p class="statistic-value">150</p>
        </div>
        <div class="statistic-box">
            <h2>Doanh thu</h2>
            <p class="statistic-value">300,000,000 VND</p>
        </div>
        <div class="statistic-box">
            <h2>Số lượng khách hàng</h2>
            <p class="statistic-value">1,200</p>
        </div>
        <div class="statistic-box">
            <h2>Mức độ tương tác</h2>
            <p class="statistic-value">75%</p>
        </div>
    </div>
 *@
    <!-- Biểu đồ doanh thu -->
    <div class="revenue-chart" style="width: 400px">
        <h2>Biểu đồ doanh thu tháng</h2>
        <canvas id="revenueChart"></canvas>
    </div>
    <!--Lọc những-->
    <div class="filter-section">
        <h2>Lọc báo cáo</h2>
        <form asp-controller="Admin" asp-action="ThongKe" method="get">
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="month" class="form-label">Chọn Tháng:</label>
                    <select id="month" name="month" class="form-select">
                        <option value="0">Tất cả</option>
                        @for (int i = 1; i <= 12; i++)
                        {
                            <option value="@i">@i</option>
                        }
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="quarter" class="form-label">Chọn Quý:</label>
                    <select id="quarter" name="quarter" class="form-select">
                        <option value="0">Tất cả</option>
                        <option value="1">Quý 1</option>
                        <option value="2">Quý 2</option>
                        <option value="3">Quý 3</option>
                        <option value="4">Quý 4</option>
                    </select>
                </div>
            </div>
            <button type="submit" class="btn btn-primary">Lọc</button>
        </form>
    </div>

    <div>
        <h1>Báo cáo Doanh thu</h1>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Năm</th>
                    <th>Tháng</th>
                    <th>Quý</th>
                    <th>Tổng Doanh thu</th>
                    <th>Tổng Chi phí Nhập hàng</th>
                    <th>Lợi nhuận</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>@Model.Year</td>
                    <td>@(Model.Month == 0 ? "Tất cả" : Model.Month.ToString())</td>
                    <td>@(Model.Quarter == 0 ? "Tất cả" : Model.Quarter.ToString())</td>
                    <td>@Model.TotalRevenue.ToString("C")</td>
                    <td>@Model.TotalImportCost.ToString("C")</td>
                    <td>@Model.Profit.ToString("C")</td>
                </tr>
            </tbody>
        </table>
    </div>

</div>
<script>
    const ctx = document.getElementById('revenueChart').getContext('2d');
    const revenueChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Tổng Doanh thu', 'Tổng Chi phí nhập hàng', 'Lợi nhuận'],
            datasets: [{
                label: 'Thống kê',
                data: [@Model.TotalRevenue, @Model.TotalImportCost, @Model.Profit],
                backgroundColor: ['#4CAF50', '#FFC107', '#F44336'],
                borderColor: ['#4CAF50', '#FFC107', '#F44336'],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>